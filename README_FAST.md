# Persian File Copier Pro - راهنمای کامل

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
```bash
# نصب پکیج‌های مورد نیاز
sudo apt update
sudo apt install -y python3-venv python3-pip curl

# ایجاد محیط مجازی
python3 -m venv venv
source venv/bin/activate

# نصب وابستگی‌ها
pip install -r requirements.txt
```

### اجرای سرور
```bash
# فعال‌سازی محیط مجازی
source venv/bin/activate

# اجرای سرور
python main.py
```

### دسترسی به نرم‌افزار
- **وب‌سرور**: http://localhost:8548
- **API مستندات**: http://localhost:8548/api/docs

## 🎯 قابلیت‌های جدید

### 1. مدیریت تسک‌ها
- ✅ نمایش وضعیت real-time تسک‌ها
- ✅ توقف، ادامه و لغو تسک‌ها
- ✅ حذف تسک‌های تکمیل شده
- ✅ نمایش جزئیات پیشرفت و خطاها

### 2. تنظیمات پیشرفته
- ✅ تنظیمات اسکن (عمق، تعداد فایل، فایل‌های مخفی)
- ✅ تنظیمات کپی (تأیید، حفظ زمان‌بندی، اندازه بافر)
- ✅ تنظیمات عمومی (تعداد تسک‌های همزمان)
- ✅ تنظیمات ظاهری (تم، زبان)

### 3. نگهداری سیستم
- ✅ آمار کامل سیستم
- ✅ پاکسازی پایگاه داده
- ✅ اسکن پیشرفته پوشه‌ها
- ✅ ایندکس دستی درایوها

## 📋 راهنمای استفاده

### بخش‌های اصلی

#### 1. 📁 فایل‌ها
- مشاهده و جستجو در فایل‌ها
- انتخاب چندگانه فایل‌ها
- کپی و انتقال فایل‌ها

#### 2. 💾 درایوها
- مشاهده درایوهای سیستم
- اطلاعات فضای خالی
- ایندکس خودکار درایوها

#### 3. 📋 تسک‌ها
- مدیریت تسک‌های در حال اجرا
- مشاهده پیشرفت real-time
- حذف تسک‌های تکمیل شده

#### 4. ⚙️ تنظیمات
- تنظیمات اسکن فایل‌ها
- تنظیمات کپی و انتقال
- تنظیمات ظاهری

#### 5. 🔧 نگهداری
- آمار سیستم
- پاکسازی پایگاه داده
- اسکن پیشرفته

## 🔧 API های جدید

### مدیریت تسک‌ها
```bash
# دریافت لیست تسک‌ها
curl http://localhost:8548/api/tasks

# حذف تسک تکمیل شده
curl -X DELETE http://localhost:8548/api/tasks/{task_id}

# حذف تمام تسک‌های تکمیل شده
curl -X DELETE http://localhost:8548/api/tasks/completed
```

### تنظیمات
```bash
# دریافت تنظیمات
curl http://localhost:8548/api/settings

# به‌روزرسانی تنظیمات
curl -X POST http://localhost:8548/api/settings \
  -H "Content-Type: application/json" \
  -d '{"scan_max_depth": 15, "copy_verify": true}'
```

### آمار و نگهداری
```bash
# آمار سیستم
curl http://localhost:8548/api/stats

# پاکسازی پایگاه داده
curl -X POST http://localhost:8548/api/maintenance/cleanup

# اسکن پوشه
curl -X POST http://localhost:8548/api/scan/directory \
  -H "Content-Type: application/json" \
  -d '{"directory": "/path/to/scan", "settings": {"max_depth": 10}}'

# ایندکس درایو
curl -X POST http://localhost:8548/api/index/drive \
  -H "Content-Type: application/json" \
  -d '{"drive_path": "/path/to/drive", "settings": {"max_files": 50000}}'
```

## 🎨 تم‌های موجود

1. **روشن** (پیش‌فرض)
2. **تاریک**
3. **نیمه تاریک**
4. **کوه البرز** (سبز)
5. **دریای خزر** (آبی)
6. **کویر ایران** (نارنجی)
7. **خلیج فارس** (فیروزه‌ای)

## 🔍 تست عملکرد

### اجرای تست خودکار
```bash
python test_server.py
```

### تست دستی
```bash
# تست سلامت سرور
curl http://localhost:8548/api/health

# تست کپی فایل
curl -X POST http://localhost:8548/api/copy \
  -H "Content-Type: application/json" \
  -d '{"source_files": ["/tmp/test.txt"], "destination": "/tmp/dest"}'
```

## 🛠️ عیب‌یابی

### مشکلات رایج

#### 1. سرور اجرا نمی‌شود
```bash
# بررسی پورت
sudo lsof -i :8548

# کشتن پروسه‌های قبلی
pkill -f "python main.py"

# اجرای مجدد
python main.py
```

#### 2. مشکل دسترسی فایل
```bash
# بررسی مجوزها
ls -la /path/to/file

# تغییر مجوزها (در صورت نیاز)
sudo chmod 644 /path/to/file
```

#### 3. مشکل پایگاه داده
```bash
# حذف فایل پایگاه داده
rm persian_file_cache.db

# اجرای مجدد سرور
python main.py
```

## 📊 آمار و عملکرد

### بهینه‌سازی‌های انجام شده
- ✅ تشخیص نوع دستگاه برای بهینه‌سازی بافر
- ✅ اسکن موازی و غیرمسدودکننده
- ✅ مدیریت حافظه بهبود یافته
- ✅ ایندکس‌های بهینه پایگاه داده

### محدودیت‌ها
- **نسخه رایگان**: حداکثر 100 فایل، 2 تسک همزمان
- **نسخه Pro**: نامحدود

## 🆕 تغییرات نسخه 3.5.0

### بهبودهای اصلی
1. **مشکل دسترسی**: بهبود تشخیص دستگاه‌ها با دسترسی کامل
2. **اسکن کامل**: اسکن بازگشتی کامل پوشه‌ها و زیرپوشه‌ها
3. **مدیریت تسک‌ها**: UI کامل برای مدیریت تسک‌ها
4. **تنظیمات پیشرفته**: پنل تنظیمات کامل
5. **نگهداری سیستم**: ابزارهای نگهداری و آمار

### API های جدید
- `/api/settings` - مدیریت تنظیمات
- `/api/stats` - آمار سیستم
- `/api/maintenance/cleanup` - پاکسازی
- `/api/scan/directory` - اسکن پیشرفته
- `/api/index/drive` - ایندکس درایو
- `/api/tasks/{id}/delete` - حذف تسک

## 🎉 نتیجه‌گیری

نرم‌افزار Persian File Copier Pro حالا با تمام قابلیت‌های درخواستی آماده استفاده است:

✅ **مشکل دسترسی حل شد**: سرور با دسترسی کامل اجرا می‌شود
✅ **اسکن کامل**: همه فایل‌ها و زیرپوشه‌ها اسکن می‌شوند
✅ **مدیریت تسک‌ها**: دکمه‌های حذف و مدیریت اضافه شدند
✅ **تنظیمات**: پنل تنظیمات کامل اضافه شد
✅ **نگهداری**: ابزارهای نگهداری و آمار اضافه شدند

برای شروع استفاده، کافی است سرور را اجرا کرده و به آدرس http://localhost:8548 مراجعه کنید! 🚀